<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Page Management</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.js"></script>
    <script src="/static/scripts.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>

    <div class="max-w-3xl mx-auto py-12">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Feature a New Article</h1>
        <form id="featureArticleForm" class="bg-white p-6 rounded-lg shadow-md">
            <div class="mb-4">
                <label for="title" class="block text-gray-700 font-bold mb-2">Title</label>
                <input type="text" id="title" class="w-full p-3 border rounded" required>
            </div>

            <div class="mb-4">
                <label for="description" class="block text-gray-700 font-bold mb-2">Description</label>
                <textarea id="description" class="w-full p-3 border rounded" rows="4" required></textarea>
            </div>

            <div class="mb-4">
                <label for="image" class="block text-gray-700 font-bold mb-2">Image (optional)</label>
                <input type="file" id="image" class="w-full">
            </div>

            <div class="mb-4">
                <label for="url" class="block text-gray-700 font-bold mb-2">Article URL or YouTube URL</label>
                <input type="url" id="url" class="w-full p-3 border rounded" required>
            </div>

            <div class="mb-4">
                <label for="urlText" class="block text-gray-700 font-bold mb-2">Link Text</label>
                <input type="text" id="urlText" class="w-full p-3 border rounded" value="Read More">
            </div>

            <div class="mb-4">
                <label for="readTime" class="block text-gray-700 font-bold mb-2">Read Time (e.g., "5 min read")</label>
                <input type="text" id="readTime" class="w-full p-3 border rounded" required>
            </div>

            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded mt-4">Feature Article</button>
        </form>
    </div>


    <!-- JavaScript to handle article submission with Socket.IO -->
    <script>
        const socket = io();

        document.getElementById('featureArticleForm').addEventListener('submit', async (event) => {
            event.preventDefault();

            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const imageFile = document.getElementById('image').files[0];
            const url = document.getElementById('url').value;
            const urlText = document.getElementById('urlText').value;
            const readTime = document.getElementById('readTime').value;

            // Prepare form data
            const formData = new FormData();
            formData.append('title', title);
            formData.append('description', description);
            if (imageFile) formData.append('image', imageFile);
            formData.append('url', url);
            formData.append('urlText', urlText);
            formData.append('readTime', readTime);

            // Emit article data to the server via Socket.IO
            socket.emit('feature_article', {
                title,
                description,
                image_url: imageFile ? URL.createObjectURL(imageFile) : null,
                url,
                url_text: urlText,
                read_time: readTime
            });

            // Reset form fields
            event.target.reset();
            alert('Article featured successfully!');
        });
    </script>


    <!-- JavaScript to handle featured articles submission with Socket.IO -->
    <script>
        const socket = io();

        document.getElementById('featureArticleForm').addEventListener('submit', async (event) => {
            event.preventDefault();

            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const imageFile = document.getElementById('image').files[0];
            const url = document.getElementById('url').value;
            const urlText = document.getElementById('urlText').value;
            const readTime = document.getElementById('readTime').value;

            // Prepare form data
            const formData = new FormData();
            formData.append('title', title);
            formData.append('description', description);
            if (imageFile) formData.append('image', imageFile);
            formData.append('url', url);
            formData.append('urlText', urlText);
            formData.append('readTime', readTime);

            // Emit article data to the server via Socket.IO
            socket.emit('feature_article', {
                title,
                description,
                image_url: imageFile ? URL.createObjectURL(imageFile) : null,
                url,
                url_text: urlText,
                read_time: readTime
            });

            // Reset form fields
            event.target.reset();
            alert('Article featured successfully!');
        });
    </script>
</body>

</html>